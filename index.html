<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Family Feud Host App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .flip { transition: all 0.3s ease-in-out; transform: scaleY(1); }
    .hidden-answer { transform: scaleY(0); opacity: 0; }
  </style>
</head>
<body class="bg-blue-900 text-white min-h-screen flex flex-col items-center p-6">
  <h1 class="text-4xl font-bold mb-6">Family Feud Host Panel</h1>

  <!-- Question/Answer Editor -->
  <div class="bg-white text-black p-4 rounded w-full max-w-2xl mb-8">
    <h2 class="text-xl font-bold mb-2">Create New Question</h2>
    <label class="block mb-2">Question:
      <input id="questionInput" type="text" class="w-full px-2 py-1 border rounded" />
    </label>
    <div id="answerInputs" class="space-y-2 mb-2">
      <!-- Answer inputs dynamically added -->
    </div>
    <button onclick="addAnswerInput()" class="bg-gray-600 text-white px-2 py-1 rounded">Add Answer</button>
    <button onclick="loadCustomQuestion()" class="bg-green-700 text-white px-4 py-1 rounded ml-2">Load Question</button>
  </div>

  <!-- Scoreboard -->
  <div class="flex gap-8 mb-8">
    <div>
      <h2 class="text-xl font-semibold mb-2">Team A</h2>
      <div id="scoreA" class="text-3xl">0</div>
      <button onclick="addPoints('A')" class="mt-2 bg-green-600 px-4 py-1 rounded">+</button>
    </div>
    <div>
      <h2 class="text-xl font-semibold mb-2">Team B</h2>
      <div id="scoreB" class="text-3xl">0</div>
      <button onclick="addPoints('B')" class="mt-2 bg-green-600 px-4 py-1 rounded">+</button>
    </div>
  </div>

  <!-- Answers Section -->
  <div class="w-full max-w-2xl bg-white text-black rounded-lg p-4 mb-8">
    <h3 id="displayQuestion" class="text-2xl font-bold mb-4">Question will appear here</h3>
    <div id="answers" class="grid grid-cols-2 gap-4">
      <!-- Dynamically filled -->
    </div>
  </div>

  <!-- Strikes -->
  <div class="flex gap-4 mb-6">
    <h2 class="text-xl font-semibold">Strikes:</h2>
    <div id="strikes" class="flex gap-2">
      <span class="text-4xl">❌</span>
      <span class="text-4xl">❌</span>
      <span class="text-4xl">❌</span>
    </div>
    <button onclick="resetStrikes()" class="bg-red-700 px-4 py-1 rounded">Reset</button>
  </div>

  <audio id="ding" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
  <audio id="buzz" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>

  <script>
    let answers = [];
    let revealed = [];
    let scoreA = 0;
    let scoreB = 0;
    let currentStrikes = 0;

    const ding = document.getElementById('ding');
    const buzz = document.getElementById('buzz');

    function renderAnswers() {
      revealed = Array(answers.length).fill(false);
      const answersDiv = document.getElementById('answers');
      answersDiv.innerHTML = '';
      answers.forEach((ans, i) => {
        const el = document.createElement('div');
        el.className = 'bg-yellow-300 text-black p-3 rounded shadow cursor-pointer text-center hidden-answer';
        el.textContent = `${ans.text} - ${ans.points} pts`;
        el.onclick = () => revealAnswer(i, el);
        answersDiv.appendChild(el);
      });
    }

    function revealAnswer(index, el) {
      if (!revealed[index]) {
        revealed[index] = true;
        el.classList.remove('hidden-answer');
        el.classList.add('flip');
        ding.play();
      }
    }

    function addPoints(team) {
      const total = answers.reduce((sum, a, i) => sum + (revealed[i] ? a.points : 0), 0);
      if (team === 'A') scoreA += total;
      else scoreB += total;
      updateScores();
    }

    function updateScores() {
      document.getElementById('scoreA').textContent = scoreA;
      document.getElementById('scoreB').textContent = scoreB;
    }

    function resetStrikes() {
      currentStrikes = 0;
      const xEls = document.getElementById('strikes').children;
      for (let el of xEls) el.style.opacity = '0.2';
    }

    document.getElementById('strikes').addEventListener('click', () => {
      if (currentStrikes < 3) {
        document.getElementById('strikes').children[currentStrikes].style.opacity = '1';
        buzz.play();
        currentStrikes++;
      }
    });

    // Answer Input Editor
    const answerContainer = document.getElementById('answerInputs');
    function addAnswerInput() {
      const div = document.createElement('div');
      div.className = 'flex gap-2';
      div.innerHTML = `
        <input type="text" placeholder="Answer" class="flex-1 px-2 py-1 border rounded" />
        <input type="number" placeholder="Points" class="w-24 px-2 py-1 border rounded" />
      `;
      answerContainer.appendChild(div);
    }

    function loadCustomQuestion() {
      const question = document.getElementById('questionInput').value;
      const answerInputs = [...answerContainer.children];
      const newAnswers = answerInputs.map(div => {
        const [textInput, pointInput] = div.querySelectorAll('input');
        return {
          text: textInput.value.trim(),
          points: parseInt(pointInput.value, 10) || 0
        };
      }).filter(a => a.text);

      document.getElementById('displayQuestion').textContent = question || 'Untitled Question';
      answers = newAnswers;
      renderAnswers();
      resetStrikes();
    }

    resetStrikes();
    addAnswerInput();
    addAnswerInput();
  </script>
</body>
</html>
